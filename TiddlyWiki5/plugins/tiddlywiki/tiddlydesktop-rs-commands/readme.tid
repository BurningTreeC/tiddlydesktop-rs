title: $:/plugins/tiddlywiki/tiddlydesktop-rs-commands/readme

! TiddlyDesktop-RS Commands Plugin

This plugin provides action widgets for executing shell commands when running in [[TiddlyDesktop-RS|https://github.com/BurningTreeC/tiddlydesktop-rs]].

!! Requirements

This plugin only works when your wiki is opened in TiddlyDesktop-RS. It has no effect in browsers or other TiddlyWiki hosts.

!! Action Widget: `<$action-run-command>`

Executes a shell command or script.

!!! Attributes

|!Attribute |!Description |!Default |
|`$command` |Command or script path to run (required) |- |
|`$args` |Arguments (space-separated, supports quoted strings) |- |
|`$workingDir` |Working directory for the command |- |
|`$wait` |Wait for completion and capture output (`yes`/`no`) |`no` |
|`$confirm` |Show confirmation dialog before running (`yes`/`no`) |`yes` |
|`$outputTiddler` |Tiddler to store command output (requires `$wait="yes"`) |- |
|`$outputField` |Field for stdout |`text` |
|`$exitCodeField` |Field for exit code |- |
|`$stderrField` |Field for stderr |- |

!!! Examples

!!!! Capture output

```
<$button>
  Get Date
  <$action-run-command
    $command="date"
    $wait="yes"
    $outputTiddler="$:/temp/date-output"
    $exitCodeField="exit_code"
  />
</$button>

Output: {{$:/temp/date-output}}
```

!!! Linux Examples

!!!! Open current folder in file manager

```
<$button>
  Open in Files
  <$action-run-command $command="xdg-open" $args="."/>
</$button>
```

!!!! Desktop notification

```
<$button>
  Notify Me
  <$action-run-command
    $command="notify-send"
    $args="'TiddlyWiki' 'Your task is complete!'"
    $confirm="no"/>
</$button>
```

!!!! Open URL in default browser

```
<$button>
  Visit TiddlyWiki.com
  <$action-run-command $command="xdg-open" $args="https://tiddlywiki.com" $confirm="no"/>
</$button>
```

!!!! Play a sound

```
<$button>
  Play Sound
  <$action-run-command $command="paplay" $args="/usr/share/sounds/freedesktop/stereo/complete.oga" $confirm="no"/>
</$button>
```

!!!! Copy text to clipboard

```
<$button>
  Copy to Clipboard
  <$action-run-command $command="bash" $args="-c 'echo -n \"Hello from TiddlyWiki\" | xclip -selection clipboard'" $confirm="no"/>
</$button>
```

!!!! Take a screenshot

```
<$button>
  Screenshot
  <$action-run-command $command="gnome-screenshot" $args="-d 3"/>
</$button>
```

!!! macOS Examples

!!!! Open current folder in Finder

```
<$button>
  Open in Finder
  <$action-run-command $command="open" $args="."/>
</$button>
```

!!!! Desktop notification

```
<$button>
  Notify Me
  <$action-run-command
    $command="osascript"
    $args="-e 'display notification \"Your task is complete!\" with title \"TiddlyWiki\"'"
    $confirm="no"/>
</$button>
```

!!!! Open URL in default browser

```
<$button>
  Visit TiddlyWiki.com
  <$action-run-command $command="open" $args="https://tiddlywiki.com" $confirm="no"/>
</$button>
```

!!!! Text-to-speech

```
<$button>
  Speak
  <$action-run-command $command="say" $args="'Hello from TiddlyWiki'" $confirm="no"/>
</$button>
```

!!!! Copy text to clipboard

```
<$button>
  Copy to Clipboard
  <$action-run-command $command="bash" $args="-c 'echo -n \"Hello from TiddlyWiki\" | pbcopy'" $confirm="no"/>
</$button>
```

!!!! Open an application

```
<$button>
  Open Calculator
  <$action-run-command $command="open" $args="-a Calculator" $confirm="no"/>
</$button>
```

!!!! Take a screenshot (saves to Desktop)

```
<$button>
  Screenshot in 3s
  <$action-run-command $command="screencapture" $args="-T 3 ~/Desktop/screenshot.png"/>
</$button>
```

!!!! Play a sound

```
<$button>
  Play Sound
  <$action-run-command $command="afplay" $args="/System/Library/Sounds/Glass.aiff" $confirm="no"/>
</$button>
```

!!! Cross-Platform Tips

* Use `$confirm="no"` only for trusted, non-destructive commands
* For complex commands, consider using `bash -c '...'` or `sh -c '...'`
* Use the `$workingDir` attribute to set the directory context for file operations
* Capture output with `$wait="yes"` and `$outputTiddler` to use command results in your wiki

!! Security

!!! Per-Wiki Permission

This plugin requires explicit user approval before it can execute commands:

# When you install this plugin in a wiki, it creates a config tiddler: [[$:/config/TiddlyDesktop/AllowRunCommand]]
# On first load in TiddlyDesktop-RS, a native dialog asks you to approve command execution for this wiki
# Your approval is stored persistently - you won't be asked again for this wiki
# You can check permission status by viewing [[$:/config/TiddlyDesktop/AllowRunCommand]]

This ensures that:

* Wikis you download cannot execute commands without your explicit approval
* Each wiki must be approved separately
* You maintain control over which wikis can run commands

!!! Per-Command Confirmation

* ''Confirmation dialog'': By default, a native dialog asks the user to approve each command
* Set `$confirm="no"` only for trusted commands you control
* ''Destructive commands'' (like `rm -rf`, `format`, etc.) ''always'' require confirmation, even with `$confirm="no"`
* Commands run with your user permissions
